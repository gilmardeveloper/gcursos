<!DOCTYPE html>
<html lang="pt-br">
<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<title>GCURSOS | Redefinir senha</title>
	<!-- plugins:css -->
	<link rel="stylesheet" th:href="@{~/css/materialdesignicons.min.css}">
	<link rel="stylesheet" th:href="@{~/css/simple-line-icons.css}">
	<link rel="stylesheet" th:href="@{~/css/flag-icon.min.css}">
	<link rel="stylesheet" th:href="@{~/css/perfect-scrollbar.min.css}">
	<!-- endinject -->
	<!-- plugin css for this page -->
	<!-- End plugin css for this page -->
	<!-- inject:css -->
	<link rel="stylesheet" th:href="@{~/css/style.css}">
	<!-- endinject -->
	<link rel="shortcut icon" th:href="@{/images/favicon.png}" />
</head>

<body>
	<div class="container-scroller">
		<div class="container-fluid page-body-wrapper">


			<div th:if="${param.logout}"></div>

			<div class="row">
				<div class="content-wrapper full-page-wrapper d-flex align-items-center auth register-full-bg">
					<div class="row w-100">
						<div class="col-lg-4 mx-auto">
								<div class="auth-form-dark text-left p-5">
									<h2>Registro</h2>
									<h4 class="font-weight-light">Altere a sua senha</h4>
									<form th:action="@{/redefinir-senha}" method="post" class="pt-4">
										
										<div th:if="${alert != null}">
											<div th:class="${alert}" role="alert">
												<i class="mdi mdi-alert-circle"></i>
												<span th:text="${message}"></span>
											</div>
										</div>

										<div th:if="${param.error != null}">
											<div class="alert alert-fill-danger" role="alert">
												<i class="mdi mdi-alert-circle"></i>
												<span th:text="${session[SPRING_SECURITY_LAST_EXCEPTION].message}"></span>
											</div>
										</div>

										<input type="hidden" name="id" th:value="${usuario != null} ? ${usuario.id} : ''"/>
										<input type="hidden" name="nome" th:value="${usuario != null} ? ${usuario.nome} : ''"/>
										<input type="hidden" name="email" th:value="${usuario != null} ? ${usuario.email} : ''"/>
																				
										<div class="form-group">
											<label for="senha">Nova senha</label>
											<input type="password" class="form-control" id="senha" placeholder="Password" name="senha" required="true" />
											<i class="mdi mdi-eye"></i>
										</div>
										<div class="form-group">
											<label for="confirme">Confirme</label>
											<input type="password" class="form-control" id="confirme" placeholder="Confirm password" required="true" />
											<i class="mdi mdi-eye"></i>
										</div>
										<div class="mt-5">
											<button id="btn-action" class="btn btn-block btn-primary btn-lg font-weight-medium" type="submit">Redefinir</button>
										</div>
										<div class="col-lg-12">
											<div class="row justify-content-between">
												<div class="mt-3 col-lg-6">
													<a th:href="@{/login}" class="auth-link text-white">Fazer login</a>
												</div>  
											</div>
										</div>
									</form>
								</div>
						</div>
					</div>
				</div>
				<!-- content-wrapper ends -->
			</div>
			<!-- row ends -->
		</div>
		<!-- page-body-wrapper ends -->
	</div>
	<!-- container-scroller -->
	<!-- plugins:js -->
	<script th:src="@{~/js/jquery.min.js}"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
	<script th:src="@{~/js/bootstrap.min.js}"></script>
	<script th:src="@{~/js/perfect-scrollbar.jquery.min.js}"></script>
	<!-- endinject -->
	<!-- inject:js -->
	<script th:src="@{~/js/off-canvas.js}"></script>
	<script th:src="@{~/js/hoverable-collapse.js}"></script>
	<script th:src="@{~/js/misc.js}"></script>
	<script th:src="@{~/js/settings.js}"></script>
	<script th:src="@{~/js/todolist.js}"></script>
	<!-- endinject -->

	<script>
		
		$(document).ready(function(){

			$('#senha').on('keyup', statusCompare);
			$('#confirme').on('keyup', statusCompare);

		});

		function statusCompare(){
			if($('#senha').val() == $('#confirme').val()){
					$('#confirme').removeClass('is-invalid');
					$('#senha').removeClass('is-invalid');
					$('#confirme').addClass('is-valid');
					$('#senha').addClass('is-valid');
					$('#btn-action').removeClass('disabled');
				}else{
					$('#confirme').removeClass('is-valid');
					$('#senha').removeClass('is-valid');
					$('#confirme').addClass('is-invalid');
					$('#senha').addClass('is-invalid');
					$('#btn-action').addClass('disabled');
				}
		}


	</script>
</body>

</html>